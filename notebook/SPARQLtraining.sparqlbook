[{"kind":1,"language":"markdown","value":"# SPARQL Training Notebook\r\nContains old queries from the course and various new queries. "},{"kind":1,"language":"markdown","value":"## CELLAR"},{"kind":2,"language":"sparql","value":"# [endpoint=http://publications.europa.eu/webapi/rdf/sparql]\r\n\r\nPREFIX cdm: <http://publications.europa.eu/ontology/cdm#>\r\nPREFIX dc: <http://purl.org/dc/elements/1.1/>\r\nPREFIX dct: <http://purl.org/dc/terms/>\r\nPREFIX euvoc: <http://publications.europa.eu/ontology/euvoc#>\r\nPREFIX skos: <http://www.w3.org/2004/02/skos/core#>\r\nPREFIX skosxl: <http://www.w3.org/2008/05/skos-xl#>\r\n\r\nSELECT DISTINCT ?c ?plabel as ?CurrentLabel ?xlabel as ?OldLabel ?sdate as ?StartDate ?xdate as ?EndDate ?labelType\r\nFROM <http://publications.europa.eu/resource/authority/country>\r\nWHERE {\r\n    ?c a skos:Concept .\r\n    VALUES ?c { <http://publications.europa.eu/resource/authority/country/MKD> }\r\n    ?c skosxl:altLabel/euvoc:startDate ?sdate.\r\n    OPTIONAL {\r\n       ?c skosxl:altLabel/euvoc:endDate ?xdate.\r\n    }\r\n    ?c skosxl:altLabel/dct:type ?labelType .\r\n    ?c skosxl:prefLabel/skosxl:literalForm ?plabel.\r\n    filter (lang(?plabel)=\"en\")\r\n    ?c skosxl:altLabel/skosxl:literalForm ?xlabel.\r\n    filter (lang(?xlabel)=\"en\")\r\n}"},{"kind":1,"language":"markdown","value":"---"},{"kind":1,"language":"markdown","value":"VALUES (based on Q.15, homework)"},{"kind":2,"language":"sparql","value":"\r\n#defaultView:LineChart\r\nSELECT ?ms ?date ?population ?msLabel \r\n \r\nWHERE {\r\n  VALUES ?ms {wd:Q36 wd:Q29 wd:Q38 }\r\n  ?ms wdt:P463 wd:Q458;\r\n      p:P1082 [ps:P1082 ?population ;\r\n               pq:P585 ?date].\r\n  FILTER (?date > \"1990-01-01T00:00:00Z\"^^<http://www.w3.org/2001/XMLSchema#dateTime>)\r\n  SERVICE wikibase:label { bd:serviceParam wikibase:language \"[AUTO_LANGUAGE],en\". }\r\n}\r\n\r\nORDER BY ?date"},{"kind":2,"language":"sparql","value":"VALUES (?v1 ?v2) {(:c11 :c21) (:c21 :c22)"},{"kind":2,"language":"sparql","value":"VALUES ?v1 {:c1 :c2 :c3 :cN)}\r\n"},{"kind":2,"language":"sparql","value":"PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\r\nPREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\r\nPREFIX wdt: <http://www.wikidata.org/prop/direct/>\r\nPREFIX wd: <http://www.wikidata.org/entity/>\r\nSELECT DISTINCT ?book ?title (GROUP_CONCAT (DISTINCT ?author; SEPARATOR = \", \") AS ?authors) ?pubDate\r\n{\r\n  VALUES ?book {wd:Q17744504 wd:Q17744476 wd:Q61718117 wd:Q59784970 wd:Q17744339 wd:Q51601248 wd:Q17744488 wd:Q27942623  wd:Q108378522 wd:Q110549106}\r\n         \r\n         ?book wdt:P1476 ?title.\r\n         OPTIONAL {?book (wdt:P50/rdfs:label)|(wdt:P98/rdfs:label)|wdt:P2093 ?author\r\n                   FILTER (LANG(?author)=\"\"||LANG(?author)=\"en\")}\r\n         OPTIONAL {?book wdt:P577 ?pubDate}\r\n \r\n\r\n}\r\nGROUP BY ?book ?title ?pubDate"},{"kind":1,"language":"markdown","value":"## VocBench"},{"kind":1,"language":"markdown","value":"Querying several repositories"},{"kind":2,"language":"sparql","value":"SELECT * WHERE {\r\n    ?localConcept a skos:Concept .\r\n    SERVICE <repository:OP_TRAINING_country_core> {\r\n        ?countryConcept a skos:Concept .\r\n    }\r\n}"},{"kind":1,"language":"markdown","value":"Available graphs at an endpoint"},{"kind":2,"language":"sparql","value":"SELECT DISTINCT ?g \r\n\r\nWHERE { \r\n\r\n   GRAPH ?g {?s ?p ?o .} \r\n\r\n} \r\n"},{"kind":1,"language":"markdown","value":"Construct"},{"kind":1,"language":"markdown","value":"Copy all concepts with their preferred label in Spanish"},{"kind":2,"language":"sparql","value":"PREFIX skosxl: <http://www.w3.org/2008/05/skos-xl#>\r\n\r\nSELECT ?concept ?prefLabel_ES\r\nWHERE {\r\n?concept skosxl:prefLabel ?prefLabel .\r\n?prefLabel skosxl:literalForm ?prefLabel_ES .\r\nFILTER (LANG(?prefLabel_ES) = \"es\")\r\n}"},{"kind":2,"language":"sparql","value":"CONSTRUCT {\r\n    ?concept skosxl:prefLabel ?prefLabel .\r\n    ?prefLabel skosxl:literalForm ?prefLabel_ES .\r\n}\r\nWHERE {\r\n?concept skosxl:prefLabel/skosxl:literalForm ?prefLabel_ES \r\nFILTER (LANG(?prefLabel_EN) = \"es\")\r\n}"}]