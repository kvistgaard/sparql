[{"kind":1,"language":"markdown","value":"# SPARQL Exercise solutions"},{"kind":1,"language":"markdown","value":"SPARQL Endpoints\r\n|Name|Endpoint URL|\r\n|--|--|\r\n|DBpedia|https://dbpedia.org/sparql|\r\n|Wikidata|https://query.wikidata.org|\r\n|CELLAR|http://publications.europa.eu/webapi/rdf/sparql|\r\n|EU Knowledge Graph|https://query.linkedopendata.eu|\r\n|Open Data Portal|https://data.europa.eu/sparql – [enhanced editor](https://data.europa.eu/data/sparql)|\r\n|EC Data Platform|https://test-linked.ec-dataplatform.eu/sparql (test server)|"},{"kind":1,"language":"markdown","value":"#### Q.2 Which of the leaders of member states of the European Union are independent politicians, according to DBpedia.\r\n\r\n"},{"kind":1,"language":"markdown","value":"Q.2.1. Find EU member states with the following query:"},{"kind":2,"language":"sparql","value":"PREFIX dct: <http://purl.org/dc/terms/>\r\nPREFIX dbc: <http://dbpedia.org/resource/Category:>\r\nPREFIX dbo: <http://dbpedia.org/ontology/>\r\nSELECT DISTINCT ?MS ?leader\r\nWHERE {\r\n?MS    a           dbo:Country;\r\n       dct:subject dbc:Member_states_of_the_European_Union }"},{"kind":1,"language":"markdown","value":"- Q.2.2. Find all country leaders\r\n- Q.2.3. Find the independent politicians among them"},{"kind":2,"language":"sparql","value":"PREFIX dbr: <http://dbpedia.org/resource/>\r\nPREFIX dbr: <http://dbpedia.org/resource/>\r\nPREFIX dbp: <http://dbpedia.org/property/>\r\nPREFIX dct: <http://purl.org/dc/terms/>\r\nPREFIX dbc: <http://dbpedia.org/resource/Category:>\r\nPREFIX dbo: <http://dbpedia.org/ontology/>\r\n\r\nSELECT DISTINCT ?MS ?leader\r\nWHERE {\r\n?MS    a           dbo:Country;\r\n       dct:subject dbc:Member_states_of_the_European_Union ;\r\n       dbp:leaderName ?leader .                   #Q.2.2\r\n \r\n?leader dbp:party dbr:Independent_politician .    #Q.2.3\r\n}"},{"kind":1,"language":"markdown","value":"#### Q.3 Based on the query from Q.2, find the total number of children of EU leaders (of which Dbpedia “knows”)."},{"kind":2,"language":"sparql","value":"PREFIX dbp: <http://dbpedia.org/property/>\r\nPREFIX dbp: <http://dbpedia.org/property/>\r\nPREFIX dct: <http://purl.org/dc/terms/>\r\nPREFIX dbc: <http://dbpedia.org/resource/Category:>\r\nPREFIX dbp: <http://dbpedia.org/property/>\r\nPREFIX dct: <http://purl.org/dc/terms/>\r\nPREFIX dbc: <http://dbpedia.org/resource/Category:>\r\nPREFIX dbo: <http://dbpedia.org/ontology/>\r\n\r\nSELECT (COUNT (DISTINCT ?child) AS ?Number_of_children)\r\n\r\n{\r\n?MS a dbo:Country; \r\n    dct:subject dbc:Member_states_of_the_European_Union ;\r\n    dbp:leaderName ?leader . \r\n\r\n?leader dbo:child ?child.\r\n} "},{"kind":2,"language":"sparql","value":"PREFIX dbp: <http://dbpedia.org/property/>\r\nPREFIX dbp: <http://dbpedia.org/property/>\r\nPREFIX dct: <http://purl.org/dc/terms/>\r\nPREFIX dbc: <http://dbpedia.org/resource/Category:>\r\nPREFIX dbp: <http://dbpedia.org/property/>\r\nPREFIX dct: <http://purl.org/dc/terms/>\r\nPREFIX dbc: <http://dbpedia.org/resource/Category:>\r\nPREFIX dbo: <http://dbpedia.org/ontology/>\r\nSELECT ?leader (COUNT (DISTINCT ?child) AS ?Number_of_children)\r\n\r\n{\r\n?MS a dbo:Country; \r\n    dct:subject dbc:Member_states_of_the_European_Union ;\r\n    dbp:leaderName ?leader . \r\n\r\n?leader dbo:child ?child.\r\n} \r\n\r\nGROUP BY ?leader\r\nORDER BY ?Number_of_children"},{"kind":1,"language":"markdown","value":"#### Q.4 ....."},{"kind":2,"language":"sparql","value":"PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>\r\nPREFIX xsd: <http://www.w3.org/2001/XMLSchema#>\r\nPREFIX dbp: <http://dbpedia.org/property/>\r\nPREFIX xsd: <http://www.w3.org/2001/XMLSchema#>\r\nPREFIX xsd: <http://www.w3.org/2001/XMLSchema#>\r\nPREFIX dbp: <http://dbpedia.org/property/>\r\nPREFIX dbp: <http://dbpedia.org/property/>\r\nPREFIX xsd: <http://www.w3.org/2001/XMLSchema#>\r\nPREFIX dbp: <http://dbpedia.org/property/>\r\nPREFIX dct: <http://purl.org/dc/terms/>\r\nPREFIX dbc: <http://dbpedia.org/resource/Category:>\r\nPREFIX dct: <http://purl.org/dc/terms/>\r\nPREFIX dbc: <http://dbpedia.org/resource/Category:>\r\nPREFIX dbo: <http://dbpedia.org/ontology/>\r\nSELECT DISTINCT ?MS ?leader ?Age\r\n \r\nWHERE {\r\n?MS a           dbo:Country;\r\n    dct:subject dbc:Member_states_of_the_European_Union ;\r\n    dbp:leaderName ?leader .\r\n?leader dbo:birthDate ?birthDate .\r\n \r\nBIND (SUBSTR(STR(?birthDate),0,4) AS ?YearBorn)\r\nBIND (SUBSTR(STR(NOW()),0,4) AS ?CurrentYear)\r\nBIND (xsd:int(?CurrentYear)-xsd:int(?YearBorn) AS ?Age) }\r\n\r\n \r\nORDER BY ?Age"},{"kind":1,"language":"markdown","value":"#### Q.5 ..."},{"kind":2,"language":"sparql","value":"PREFIX dbp: <http://dbpedia.org/property/>\r\nPREFIX dbp: <http://dbpedia.org/property/>\r\nPREFIX dct: <http://purl.org/dc/terms/>\r\nPREFIX dbc: <http://dbpedia.org/resource/Category:>\r\nPREFIX dbp: <http://dbpedia.org/property/>\r\nPREFIX dct: <http://purl.org/dc/terms/>\r\nPREFIX dbc: <http://dbpedia.org/resource/Category:>\r\nPREFIX dbo: <http://dbpedia.org/ontology/>\r\nSELECT ?monthBorn (COUNT (?leader) AS ?LB)\r\nWHERE {​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ \r\n?MS a            dbo:Country; \r\n        dct:subject dbc:Member_states_of_the_European_Union;\r\n        dbp:leaderName ?leader . \r\n?leader dbo:birthDate ?birthDate . \r\nBIND (MONTH(?birthDate) AS ?monthBorn) \r\n}​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​\r\nGROUP BY ?monthBorn\r\nORDER BY ?monthBorn"},{"kind":1,"language":"markdown","value":"#### Q.6 ..."},{"kind":2,"language":"sparql","value":"PREFIX foaf: <http://xmlns.com/foaf/0.1/>\r\nPREFIX foaf: <http://xmlns.com/foaf/0.1/>\r\nPREFIX dbp: <http://dbpedia.org/property/>\r\nPREFIX foaf: <http://xmlns.com/foaf/0.1/>\r\nPREFIX dbp: <http://dbpedia.org/property/>\r\nPREFIX foaf: <http://xmlns.com/foaf/0.1/>\r\nPREFIX foaf: <http://xmlns.com/foaf/0.1/>\r\nPREFIX dbp: <http://dbpedia.org/property/>\r\nPREFIX dbp: <http://dbpedia.org/property/>\r\nPREFIX dct: <http://purl.org/dc/terms/>\r\nPREFIX dbc: <http://dbpedia.org/resource/Category:>\r\nPREFIX dct: <http://purl.org/dc/terms/>\r\nPREFIX dbc: <http://dbpedia.org/resource/Category:>\r\nPREFIX dbo: <http://dbpedia.org/ontology/>\r\n# Q.6.1\r\nSELECT DISTINCT ?MS ?leader \r\n \r\nWHERE {​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​\r\n?MS a           dbo:Country;\r\n    dct:subject dbc:Member_states_of_the_European_Union;\r\n    dbp:leaderName  ?leader .\r\n \r\nFILTER NOT EXISTS {​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​?leader foaf:depiction ?image .}​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​    #Q.6.1.a\r\n#FILTER NOT EXISTS {​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​?leader dbo:child ?children .}​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​  #Q.6.1.b\r\n}​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​"},{"kind":2,"language":"sparql","value":"PREFIX foaf: <http://xmlns.com/foaf/0.1/>\r\nPREFIX foaf: <http://xmlns.com/foaf/0.1/>\r\nPREFIX foaf: <http://xmlns.com/foaf/0.1/>\r\nPREFIX foaf: <http://xmlns.com/foaf/0.1/>\r\nPREFIX foaf: <http://xmlns.com/foaf/0.1/>\r\nPREFIX foaf: <http://xmlns.com/foaf/0.1/>\r\nPREFIX dct: <http://purl.org/dc/terms/>\r\nPREFIX dbc: <http://dbpedia.org/resource/Category:>\r\nPREFIX dbp: <http://dbpedia.org/property/>\r\nPREFIX dbp: <http://dbpedia.org/property/>\r\nPREFIX dct: <http://purl.org/dc/terms/>\r\nPREFIX dbc: <http://dbpedia.org/resource/Category:>\r\nPREFIX dbo: <http://dbpedia.org/ontology/>\r\n# Q.6.2\r\n#All leaders of MS of the EU, with their children and image, if available​\r\n \r\nSELECT DISTINCT ?MS ?leader ?children ?image\r\n \r\nWHERE {​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ \r\n \r\n?MS a              dbo:Country; \r\n    dct:subject    dbc:Member_states_of_the_European_Union; \r\n    dbp:leaderName ?leader . \r\n \r\nOPTIONAL {​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​?leader dbo:child ?children .}​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​\r\nOPTIONAL {​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​?leader foaf:depiction ?image .}​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​   \r\n}​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ \r\n \r\nORDER BY DESC(?children)"},{"kind":2,"language":"sparql","value":"PREFIX foaf: <http://xmlns.com/foaf/0.1/>\r\nPREFIX foaf: <http://xmlns.com/foaf/0.1/>\r\nPREFIX dbp: <http://dbpedia.org/property/>\r\nPREFIX dbp: <http://dbpedia.org/property/>\r\nPREFIX dbo: <http://dbpedia.org/ontology/>\r\nPREFIX dct: <http://purl.org/dc/terms/>\r\nPREFIX dbc: <http://dbpedia.org/resource/Category:>\r\n# Q.6.3\r\n\r\nSELECT \r\nCOUNT (DISTINCT ?leader_No_children) AS ?NUM_leader_No_children\r\nCOUNT (DISTINCT ?leader_No_image) AS ?NUM_leader_No_image \r\n \r\nWHERE {​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ \r\n?MS a dbo:Country; dct:subject dbc:Member_states_of_the_European_Union .\r\n \r\n      {​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​?MS dbp:leaderName ?leader_No_children . \r\n      FILTER NOT EXISTS {​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​?leader_No_children dbo:child ?children}​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​\r\n      }​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ \r\n \r\n      UNION \r\n \r\n      {​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​?MS dbp:leaderName ?leader_No_image . \r\n      FILTER NOT EXISTS {​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​?leader_No_image foaf:depiction ?image}​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​\r\n      }​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ \r\n}​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​"},{"kind":1,"language":"markdown","value":"#### Q.7 (Homework) In the VocBench project OP_TRAINING_EuroVoc_MT5211,\r\n1. Get all concepts together with their preferred label, literal form in one EU language, and the number of alternative labels sorted in descending order.\r\n2. Get all concepts without alternative label\r\n- As list of results, showing their literal form in one EU language;\r\n- As number."},{"kind":2,"language":"sparql","value":"PREFIX skosxl: <http://www.w3.org/2008/05/skos-xl#>\r\nPREFIX skosxl: <http://www.w3.org/2008/05/skos-xl#>\r\nPREFIX skos: <http://www.w3.org/2004/02/skos/core#>\r\nSELECT ?concept ?prefLabelURI ?prefLabel (COUNT (DISTINCT ?altLabel) as ?altLabels)\r\n\r\nWHERE {​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​\r\n    ?concept a skos:Concept ;\r\n    skosxl:prefLabel ?prefLabelURI ;\r\n    skosxl:altLabel ?altLabel .\r\n?prefLabelURI skosxl:literalForm ?prefLabel .\r\n    \r\nFILTER (LANG(?prefLabel) = \"en\")\r\n    \r\n}​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ \r\n\r\nGROUP BY ?concept ?prefLabelURI ?prefLabel\r\nORDER BY DESC(?altLabels)"},{"kind":2,"language":"sparql","value":"PREFIX skosxl: <http://www.w3.org/2008/05/skos-xl#>\r\nPREFIX skosxl: <http://www.w3.org/2008/05/skos-xl#>\r\nPREFIX skos: <http://www.w3.org/2004/02/skos/core#>\r\nSELECT ?concept ?prefLabelURI ?prefLabel \r\n\r\nWHERE {​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​\r\n    ?concept a skos:Concept;\r\n    skosxl:prefLabel ?prefLabelURI .\r\n?prefLabelURI skosxl:literalForm ?prefLabel .\r\n    \r\nFILTER (LANG(?prefLabel) = \"en\")\r\nFILTER NOT EXISTS {​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​?concept skosxl:altLabel ?altLabelURI}​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​\r\n}​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ "},{"kind":1,"language":"markdown","value":"#### Q.8"},{"kind":2,"language":"sparql","value":"PREFIX skosxl: <http://www.w3.org/2008/05/skos-xl#>\r\nPREFIX skosxl: <http://www.w3.org/2008/05/skos-xl#>\r\nPREFIX skos: <http://www.w3.org/2004/02/skos/core#>\r\nSELECT ?concept ?prefLabelURI ?prefLabel (COUNT (DISTINCT ?altLabel) as ?altLabels)\r\n\r\nWHERE {​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​\r\n    ?concept a skos:Concept ;\r\n    skosxl:prefLabel ?prefLabelURI ;\r\n    skosxl:altLabel ?altLabel .\r\n?prefLabelURI skosxl:literalForm ?prefLabel .\r\n    \r\nFILTER (LANG(?prefLabel) = \"en\")\r\nFILTER (STRSTARTS(STR(?concept), \"http://eurovoc.europa.eu/\"))    \r\n}​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​\r\n\r\nGROUP BY ?concept ?prefLabelURI ?prefLabel\r\nORDER BY DESC(?altLabels)"},{"kind":1,"language":"markdown","value":"#### Q.9"},{"kind":2,"language":"sparql","value":"PREFIX skosxl: <http://www.w3.org/2008/05/skos-xl#>\r\nPREFIX skosxl: <http://www.w3.org/2008/05/skos-xl#>\r\nPREFIX skos: <http://www.w3.org/2004/02/skos/core#>\r\nSELECT ?concept ?prefLabel\r\n\r\nWHERE {​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​\r\n?concept a skos:Concept .\r\n?concept skosxl:prefLabel   ?label .\r\n?label   skosxl:literalForm ?prefLabel .\r\nFILTER (lang ( ?prefLabel )=\"en\")\r\nFILTER REGEX (?prefLabel, \"wild\", \"i\")\r\n}​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​"},{"kind":1,"language":"markdown","value":"#### Q.10"},{"kind":2,"language":"sparql","value":"PREFIX skosxl: <http://www.w3.org/2008/05/skos-xl#>\r\nSELECT *\r\n{​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ ?concept skosxl:hiddenLabel/skosxl:literalForm ?hiddenLabel .}​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ "},{"kind":1,"language":"markdown","value":"#### Q.11 Find in Cellar all SKOS notes in one EU language."},{"kind":2,"language":"sparql","value":"PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\r\nPREFIX skos: <http://www.w3.org/2004/02/skos/core#>\r\n\r\nSELECT DISTINCT * \r\n\r\nWHERE {\r\n  ?s ?noteType ?note .\r\n  ?noteType rdfs:subPropertyOf* skos:note .\r\n  \r\nFILTER (LANG(?note) = \"en\")\r\n    \r\n}\r\n\r\nLIMIT 10"},{"kind":1,"language":"markdown","value":"#### Q.12 Explore Wikidata"},{"kind":1,"language":"markdown","value":"#### Q.13 Find the 1000 most populated cities from Wikidata and show their Chinese labels."},{"kind":2,"language":"sparql","value":"PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\r\nPREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\r\nPREFIX wdt: <http://www.wikidata.org/prop/direct/>\r\nPREFIX wd: <http://www.wikidata.org/entity/>\r\n\r\nSELECT DISTINCT ?city ?cityLabel ?population\r\n{\r\n  ?city wdt:P31/wdt:P279* wd:Q515;\r\n             wdt:P1082 ?population;\r\n             rdfs:label ?cityLabel .\r\n#FILTER (LANG(?cityLabel) = \"zh\")\r\nFILTER LANGMATCHES(LANG(?cityLabel), \"zh\")\r\n}\r\nORDER BY DESC (?population)\r\nLIMIT 10"},{"kind":1,"language":"markdown","value":"#### Q.14 Get the following data from Wikidata about head of states of Member States of the EU:"},{"kind":1,"language":"markdown","value":"Q.14.1 Get image grid of all head of states of Member States of the EU."},{"kind":2,"language":"sparql","value":"PREFIX wikibase: <http://wikiba.se/ontology#>\r\nPREFIX bd: <http://www.bigdata.com/rdf#>\r\nPREFIX wikibase: <http://wikiba.se/ontology#>\r\nPREFIX bd: <http://www.bigdata.com/rdf#>\r\nPREFIX wdt: <http://www.wikidata.org/prop/direct/>\r\nPREFIX wd: <http://www.wikidata.org/entity/>\r\nSELECT DISTINCT ?ms ?msLabel ?hos ?hosLabel ?hosImage \r\n \r\nWHERE {\r\n  ?ms wdt:P463 wd:Q458;\r\n      wdt:P35 ?hos .\r\n  ?hos wdt:P18 ?hosImage ;\r\n  \r\n      SERVICE wikibase:label { bd:serviceParam wikibase:language \"[AUTO_LANGUAGE],en\". }\r\n}"},{"kind":1,"language":"markdown","value":"Q.14.2. Find spouses of these heads of state, if available.\r\n"},{"kind":2,"language":"sparql","value":"PREFIX wikibase: <http://wikiba.se/ontology#>\r\nPREFIX bd: <http://www.bigdata.com/rdf#>\r\nPREFIX wdt: <http://www.wikidata.org/prop/direct/>\r\nPREFIX wd: <http://www.wikidata.org/entity/>\r\nSELECT DISTINCT ?ms ?msLabel ?hos ?hosLabel ?spouseLabel \r\n \r\nWHERE {\r\n  ?ms wdt:P463 wd:Q458;\r\n      wdt:P35 ?hos .\r\n \r\n      OPTIONAL {?hos wdt:P26 ?spouse .}\r\n  \r\n      SERVICE wikibase:label { bd:serviceParam wikibase:language \"[AUTO_LANGUAGE],en\". }\r\n}\r\n\r\nORDER BY DESC(?spouseLabel)\r\nLIMIT 10"},{"kind":1,"language":"markdown","value":"Q.14.3. Find the start dates of all head of states of EU members, for which there is information in Wikidata.\r\n"},{"kind":2,"language":"sparql","value":"PREFIX wikibase: <http://wikiba.se/ontology#>\r\nPREFIX bd: <http://www.bigdata.com/rdf#>\r\nPREFIX wikibase: <http://wikiba.se/ontology#>\r\nPREFIX bd: <http://www.bigdata.com/rdf#>\r\nPREFIX pq: <http://www.wikidata.org/prop/qualifier/>\r\nPREFIX wikibase: <http://wikiba.se/ontology#>\r\nPREFIX bd: <http://www.bigdata.com/rdf#>\r\nPREFIX pq: <http://www.wikidata.org/prop/qualifier/>\r\nPREFIX wikibase: <http://wikiba.se/ontology#>\r\nPREFIX bd: <http://www.bigdata.com/rdf#>\r\nPREFIX pq: <http://www.wikidata.org/prop/qualifier/>\r\nPREFIX ps: <https://w3id.org/payswarm#>\r\nPREFIX ps: <https://w3id.org/payswarm#>\r\nPREFIX wdt: <http://www.wikidata.org/prop/direct/>\r\nPREFIX wd: <http://www.wikidata.org/entity/>\r\nSELECT DISTINCT ?ms ?hos ?hosLabel ?msLabel ?start\r\n \r\nWHERE {\r\n  ?ms wdt:P463 wd:Q458;\r\n      p:P35 [ ps:P35 ?hos;\r\n            pq:P580 ?start] .\r\n  \r\n      SERVICE wikibase:label { bd:serviceParam wikibase:language \"[AUTO_LANGUAGE],en\". }\r\n}\r\nORDER BY ?msLabel"},{"kind":1,"language":"markdown","value":"#### Q.15 (Homework) Get the population growth of all current EU member states in the last 20 years on a line chart using the query service of Wikidata."},{"kind":2,"language":"sparql","value":"PREFIX wikibase: <http://wikiba.se/ontology#>\r\nPREFIX bd: <http://www.bigdata.com/rdf#>\r\nPREFIX pq: <http://www.wikidata.org/prop/qualifier/>\r\nPREFIX ps: <https://w3id.org/payswarm#>\r\nPREFIX wikibase: <http://wikiba.se/ontology#>\r\nPREFIX bd: <http://www.bigdata.com/rdf#>\r\nPREFIX wikibase: <http://wikiba.se/ontology#>\r\nPREFIX bd: <http://www.bigdata.com/rdf#>\r\nPREFIX wikibase: <http://wikiba.se/ontology#>\r\nPREFIX bd: <http://www.bigdata.com/rdf#>\r\nPREFIX wikibase: <http://wikiba.se/ontology#>\r\nPREFIX bd: <http://www.bigdata.com/rdf#>\r\nPREFIX pq: <http://www.wikidata.org/prop/qualifier/>\r\nPREFIX pq: <http://www.wikidata.org/prop/qualifier/>\r\nPREFIX ps: <https://w3id.org/payswarm#>\r\nPREFIX wdt: <http://www.wikidata.org/prop/direct/>\r\nPREFIX wd: <http://www.wikidata.org/entity/>\r\n\r\n#defaultView:LineChart\r\nSELECT ?date ?population ?msLabel \r\n \r\nWHERE {\r\n  ?ms wdt:P463 wd:Q458;\r\n      p:P1082 [ps:P1082 ?population ;\r\n               pq:P585 ?date].\r\n  FILTER (?date > \"1990-01-01T00:00:00Z\"^^<http://www.w3.org/2001/XMLSchema#dateTime>)\r\n  SERVICE wikibase:label { bd:serviceParam wikibase:language \"[AUTO_LANGUAGE],en\". }\r\n}\r\n\r\nORDER BY ?date"},{"kind":1,"language":"markdown","value":"#### Q.16 Based on the query for influences in the age of Enlightenment, get the influences of Hume, Descartes, Locke, and Kant ."},{"kind":2,"language":"sparql","value":"PREFIX wikibase: <http://wikiba.se/ontology#>\r\nPREFIX bd: <http://www.bigdata.com/rdf#>\r\nPREFIX wikibase: <http://wikiba.se/ontology#>\r\nPREFIX bd: <http://www.bigdata.com/rdf#>\r\nPREFIX wikibase: <http://wikiba.se/ontology#>\r\nPREFIX bd: <http://www.bigdata.com/rdf#>\r\nPREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\r\nPREFIX wikibase: <http://wikiba.se/ontology#>\r\nPREFIX bd: <http://www.bigdata.com/rdf#>\r\nPREFIX wikibase: <http://wikiba.se/ontology#>\r\nPREFIX bd: <http://www.bigdata.com/rdf#>\r\nPREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\r\nPREFIX wdt: <http://www.wikidata.org/prop/direct/>\r\nPREFIX wdt: <http://www.wikidata.org/prop/direct/>\r\nPREFIX wd: <http://www.wikidata.org/entity/>\r\n\r\nSELECT DISTINCT ?a ?aLabel (GROUP_CONCAT (?bLabel ; SEPARATOR = \", \") AS ?influencedBy)\r\n\r\n{\r\n VALUES ?a { wd:Q37160 wd:Q9191 wd:Q9353 wd:Q9312}\r\n  \r\n  ?a wdt:P31 wd:Q5;\r\n    wdt:P569 ?birth;\r\n    wdt:P737 ?b .\r\n ?b wdt:P31 wd:Q5 ;\r\n    rdfs:label ?bLabel .\r\n \r\n FILTER (LANG(?bLabel) = \"en\")\r\n SERVICE wikibase:label { bd:serviceParam wikibase:language \"[AUTO_LANGUAGE],en\". }\r\n \r\n }\r\nGROUP BY ?a ?aLabel"},{"kind":1,"language":"markdown","value":"#### Q.17 For the 4 philosophers from Q.16, extend the query by getting the short description about them, extracted by Dbpedia from Wikipedia."},{"kind":2,"language":"sparql","value":"PREFIX wikibase: <http://wikiba.se/ontology#>\r\nPREFIX bd: <http://www.bigdata.com/rdf#>\r\nPREFIX wikibase: <http://wikiba.se/ontology#>\r\nPREFIX bd: <http://www.bigdata.com/rdf#>\r\nPREFIX wikibase: <http://wikiba.se/ontology#>\r\nPREFIX bd: <http://www.bigdata.com/rdf#>\r\nPREFIX wikibase: <http://wikiba.se/ontology#>\r\nPREFIX bd: <http://www.bigdata.com/rdf#>\r\nPREFIX wikibase: <http://wikiba.se/ontology#>\r\nPREFIX bd: <http://www.bigdata.com/rdf#>\r\nPREFIX wikibase: <http://wikiba.se/ontology#>\r\nPREFIX bd: <http://www.bigdata.com/rdf#>\r\nPREFIX wikibase: <http://wikiba.se/ontology#>\r\nPREFIX bd: <http://www.bigdata.com/rdf#>\r\nPREFIX wdt: <http://www.wikidata.org/prop/direct/>\r\nPREFIX wdt: <http://www.wikidata.org/prop/direct/>\r\nPREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\r\nPREFIX wdt: <http://www.wikidata.org/prop/direct/>\r\nPREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\r\nPREFIX wdt: <http://www.wikidata.org/prop/direct/>\r\nPREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\r\nPREFIX owl: <http://www.w3.org/2002/07/owl#>\r\nPREFIX owl: <http://www.w3.org/2002/07/owl#>\r\nPREFIX wd: <http://www.wikidata.org/entity/>\r\n\r\n\r\nSELECT DISTINCT ?a ?aLabel ?description (GROUP_CONCAT (?bLabel ; SEPARATOR = \", \") AS ?influencedBy)\r\n\r\n{\r\n \r\nSERVICE <http://dbpedia.org/sparql> {\r\n   VALUES ?a { wd:Q37160 wd:Q9191 wd:Q9353 wd:Q9312}\r\n                  ?DBitem owl:sameAs ?a;\r\n                   rdfs:comment ?description.\r\n                   FILTER (LANG(?description) = \"en\")   } \r\n\r\nSERVICE <https://query.wikidata.org/bigdata/namespace/wdq/sparql>\r\n  {?a wdt:P31 wd:Q5;\r\n    wdt:P569 ?birth;\r\n    rdfs:label ?aLabel;\r\n    wdt:P737 ?b .\r\n ?b wdt:P31 wd:Q5 ;\r\n    rdfs:label ?bLabel .\r\n   \r\n FILTER (LANG(?aLabel) = \"en\")\r\n FILTER (LANG(?bLabel) = \"en\")\r\n SERVICE wikibase:label { bd:serviceParam wikibase:language \"[AUTO_LANGUAGE],en\". }\r\n  }\r\n                                   \r\n }\r\nGROUP BY ?a ?aLabel ?description"},{"kind":1,"language":"markdown","value":"#### Q.18 (Homework) Get from Wikidata all paintings painted on wood as image grid, including information on when they were created, if available."},{"kind":2,"language":"sparql","value":"PREFIX wikibase: <http://wikiba.se/ontology#>\r\nPREFIX bd: <http://www.bigdata.com/rdf#>\r\nPREFIX wikibase: <http://wikiba.se/ontology#>\r\nPREFIX bd: <http://www.bigdata.com/rdf#>\r\nPREFIX wikibase: <http://wikiba.se/ontology#>\r\nPREFIX bd: <http://www.bigdata.com/rdf#>\r\nPREFIX ps: <https://w3id.org/payswarm#>\r\nPREFIX pq: <http://www.wikidata.org/prop/qualifier/>\r\nPREFIX ps: <https://w3id.org/payswarm#>\r\nPREFIX pq: <http://www.wikidata.org/prop/qualifier/>\r\nPREFIX wdt: <http://www.wikidata.org/prop/direct/>\r\nPREFIX wd: <http://www.wikidata.org/entity/>\r\n# [endpoint=https://query.wikidata.org/bigdata/namespace/wdq/sparql]\r\n#defaultView:ImageGrid\r\nSELECT DISTINCT ?painting ?paintingLabel ?image ?inception\r\nWHERE\r\n{\r\n  ?painting wdt:P31/wdt:P279* wd:Q3305213;\r\n            wdt:P18 ?image;\r\n            p:P186 [ ps:P186 wd:Q287; pq:P518 wd:Q861259 ].\r\n  OPTIONAL {?painting wdt:P571 ?inception }\r\n  SERVICE wikibase:label { bd:serviceParam wikibase:language \"[AUTO_LANGUAGE]\". }\r\n}\r\n\r\nLIMIT 20"},{"kind":1,"language":"markdown","value":"#### Q.19 (Homework) In VocBench, from OP_TRAINING_place, find all concepts that:\r\n1. have `skos:prefLabel` in English;\r\n2. have **only** English `skos:prefLabel`;\r\n3. have `skos:prefLabel` or `skos:altLabel` in any of the languages of the Baltic or Nordic EU member states."},{"kind":2,"language":"sparql","value":"# Q.19.1\r\n\r\nPREFIX skosxl: <http://www.w3.org/2008/05/skos-xl#>\r\n\r\nSELECT ?concept ?prefLabel_EN\r\n{\r\n?concept skosxl:prefLabel/skosxl:literalForm ?prefLabel_EN \r\nFILTER (LANG(?prefLabel_EN) = \"en\")\r\n}"},{"kind":2,"language":"sparql","value":"# Q.19.2\r\nPREFIX skosxl: <http://www.w3.org/2008/05/skos-xl#>\r\nSELECT ?concept ?prefLabel_EN\r\n{\r\n?concept skosxl:prefLabel/skosxl:literalForm ?prefLabel_EN \r\nFILTER (LANG(?prefLabel_EN) = \"en\")\r\n    \r\nFILTER  NOT EXISTS {?concept skosxl:prefLabel/skosxl:literalForm ?prefLabel . \r\n                            FILTER (LANG(?prefLabel) != LANG(?prefLabel_EN))}\r\n}"},{"kind":2,"language":"sparql","value":"# Q.19.3\r\n\r\nPREFIX skosxl: <http://www.w3.org/2008/05/skos-xl#>\r\n\r\nSELECT ?concept ?label\r\n{\r\nVALUES ?tag {\"da\" \"et\" \"fi\" \"lt\" \"lv\" \"sv\"}\r\n?concept (skosxl:prefLabel|skosxl:altLabel)/skosxl:literalForm ?label\r\nFILTER (LANG(?label) = ?tag)\r\n}"},{"kind":1,"language":"markdown","value":"#### Q.20 Compare the number of preferred labels with the same literal form in OP_TRAINING_country and OP_TRAINING_place in English, French, Spanish and Italian."},{"kind":2,"language":"sparql","value":"PREFIX skosxl: <http://www.w3.org/2008/05/skos-xl#>\r\nSELECT ?tag (COUNT (DISTINCT ?label) as ?NoL)\r\n\r\n{\r\nVALUES ?tag {\"en\" \"fr\" \"es\" \"it\" }\r\n    ?country skosxl:prefLabel/skosxl:literalForm ?label\r\n     FILTER (LANG(?label) = ?tag)\r\n    \r\n    SERVICE <repository:OP_TRAINING_place_core> {\r\n        ?place skosxl:prefLabel/skosxl:literalForm ?label\r\n       FILTER (LANG(?label) = ?tag)\r\n    }\r\n}\r\nGROUP BY ?tag\r\nORDER BY ?NoL"},{"kind":1,"language":"markdown","value":"#### Q.21 Find all named graphs on CELLAR and the EC Data Platfom, sort them by number of triples and get their meta-data, if available."},{"kind":2,"language":"sparql","value":"# [endpoint=https://linked.ec-dataplatform.eu/sparql]\r\nSELECT DISTINCT ?g ?gp ?go (COUNT (?s) as ?nt)\r\nWHERE {\r\n    GRAPH ?g { ?s ?p ?o }\r\n    OPTIONAL {?g ?gp ?go}\r\n}\r\nGROUP BY ?g ?gp ?go\r\nORDER BY DESC(?nt)\r\nLIMIT 20"},{"kind":1,"language":"markdown","value":"#### Q.22 Get all member states of EU from Wikidata, their population and the corresponding concept in CELLAR from the country NAL."},{"kind":2,"language":"sparql","value":"PREFIX skos: <http://www.w3.org/2004/02/skos/core#>\r\nPREFIX skos: <http://www.w3.org/2004/02/skos/core#>\r\nPREFIX skos: <http://www.w3.org/2004/02/skos/core#>\r\nPREFIX wd: <http://www.wikidata.org/entity/>\r\nPREFIX wd: <http://www.wikidata.org/entity/>\r\nPREFIX wdt: <http://www.wikidata.org/prop/direct/>\r\n# [endpoint=https://query.wikidata.org/bigdata/namespace/wdq/sparql]\r\n\r\nprefix at: <http://publications.europa.eu/ontology/authority/> \r\nprefix atold: <http://publications.europa.eu/resource/authority/> \r\n\r\nSELECT DISTINCT ?concept ?country ?population\r\n{   ?country wdt:P298 ?code;\r\n           wdt:P463 wd:Q458 ;\r\n           wdt:P1082 ?population .\r\n  SERVICE <http://publications.europa.eu/webapi/rdf/sparql>\r\n          { ?concept skos:inScheme atold:country;\r\n                     at:authority-code ?code}      \r\n  }"},{"kind":2,"language":"sparql","value":"# version with all prefixes to be used e.g. at https://yasgui.triply.cc\r\n\r\nPREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>\r\nPREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\r\nPREFIX wdt: <http://www.wikidata.org/prop/direct/>\r\nPREFIX wd: <http://www.wikidata.org/entity/>\r\nprefix at: <http://publications.europa.eu/ontology/authority/> \r\nprefix atold: <http://publications.europa.eu/resource/authority/> \r\nPREFIX skos: <http://www.w3.org/2004/02/skos/core#>\r\n\r\nSELECT DISTINCT ?concept ?country ?population\r\n{   ?country wdt:P298 ?code;\r\n           wdt:P463 wd:Q458 ;\r\n           wdt:P1082 ?population .\r\n  SERVICE <http://publications.europa.eu/webapi/rdf/sparql>\r\n          { ?concept skos:inScheme atold:country;\r\n                     at:authority-code ?code}      \r\n  }\r\n"},{"kind":1,"language":"markdown","value":"#### Q.23 Which properties in the ERA (http://era.europa.eu/knowledge-graph) and CORDIS graph (https://linked.ec-dataplatform.eu/cordis) are used more than 100000 times? Get them grouped by named graph, showing the number of distinct objects for each property."},{"kind":2,"language":"sparql","value":"# [endpoint=https://linked.ec-dataplatform.eu/sparql]\r\n\r\nSELECT ?g ?p (COUNT (DISTINCT ?o) AS ?nv)\r\nFROM NAMED <https://linked.ec-dataplatform.eu/cordis>\r\nFROM NAMED <http://era.europa.eu/knowledge-graph>\r\n\r\nWHERE {\r\n  GRAPH ?g { ?s ?p ?o }\r\n}\r\n\r\nGROUP BY ?g ?p \r\nHAVING (COUNT (DISTINCT ?o) > 100000)\r\nORDER BY ?g DESC (?nv)"},{"kind":1,"language":"markdown","value":"#### Q.24 Using the solution of Q.22, construct a graph with triples asserting that the country concept of the NAL is the same as (using `owl:sameAs`) the corresponding item from Wikidata."},{"kind":2,"language":"sparql","value":"# [endpoint=https://query.wikidata.org/bigdata/namespace/wdq/sparql]\r\n\r\nPREFIX owl: <http://www.w3.org/2002/07/owl#>\r\nPREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>\r\nPREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\r\nPREFIX wdt: <http://www.wikidata.org/prop/direct/>\r\nPREFIX wd: <http://www.wikidata.org/entity/>\r\nprefix at: <http://publications.europa.eu/ontology/authority/> \r\nprefix atold: <http://publications.europa.eu/resource/authority/> \r\nPREFIX skos: <http://www.w3.org/2004/02/skos/core#>\r\n\r\nCONSTRUCT {?concept owl:sameAs ?country}\r\n{   ?country wdt:P298 ?code;\r\n           wdt:P463 wd:Q458 .\r\n  SERVICE <http://publications.europa.eu/webapi/rdf/sparql>\r\n          { ?concept skos:inScheme atold:country;\r\n                     at:authority-code ?code}      \r\n  }"}]